<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TSL Calendar — Full</title>
  <style>
    body { font-family: Helvetica, Arial, sans-serif; margin:0; background:#fff; color:#202124; }
    header { display:flex; justify-content:space-between; align-items:center; padding:10px 20px; border-bottom:1px solid #dadce0; }
    .nav-group { display:flex; align-items:center; gap:8px; }
    .nav-btn, #pdfBtn, .view-btn {
      background:#f1f3f4; border:1px solid #dadce0; border-radius:4px; padding:5px 10px; cursor:pointer; font-size:14px;
    }
    .nav-btn:hover, #pdfBtn:hover, .view-btn:hover { background:#e8eaed; }
    #pdfBtn { background:#1a73e8; color:white; border:none; }
    #pdfBtn:hover { background:#1765cc; }
    .month-label { font-size:18px; font-weight:500; flex:1; text-align:center; }
    .calendar { display:grid; grid-template-columns:repeat(7,1fr); border-top:1px solid #dadce0; border-left:1px solid #dadce0; }
    .day-header { background:#f8f9fa; padding:6px; text-align:center; border-right:1px solid #dadce0; border-bottom:1px solid #dadce0; font-size:12px; font-weight:500; }
    .day { border-right:1px solid #dadce0; border-bottom:1px solid #dadce0; min-height:100px; padding:2px; font-size:11px; }
    .day.other { background:#f8f9fa; color:#9aa0a6; }
    .date-num { font-size:11px; font-weight:500; margin:2px; }
    .event-line { display:flex; align-items:center; gap:4px; margin:1px 0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; cursor:pointer; }
    .dot { width:8px; height:8px; border-radius:50%; flex-shrink:0; }
    .dot.events { background:#d93025; }
    .dot.non-public { background:#f29900; }
    .dot.tbd { background:#1a73e8; }
    .dot.theater-1 { background:#5f6368; }
    .dot.theater-2 { background:#188038; }
    .more { font-size:10px; color:#5f6368; cursor:pointer; }
    .legend { display:flex; justify-content:center; gap:16px; padding:10px; border-top:1px solid #dadce0; font-size:12px; }
    .legend-item { display:flex; align-items:center; gap:4px; }
    .legend-dot { width:10px; height:10px; border-radius:50%; }
    /* Week view */
    .week-grid { display:grid; grid-template-columns:50px repeat(7,1fr); border-top:1px solid #dadce0; border-left:1px solid #dadce0; height:calc(100vh - 120px); overflow:auto; }
    .time-slot { height:30px; font-size:10px; color:#5f6368; border-bottom:1px solid #f1f3f4; }
    .week-day-col { border-right:1px solid #dadce0; position:relative; }
    .week-event { position:absolute; left:2px; right:2px; font-size:11px; padding:2px 4px; background:rgba(26,115,232,0.1); border-left:3px solid #1a73e8; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; cursor:pointer; }
    /* Schedule view */
    .schedule { padding:10px 20px; }
    .schedule-day { margin-bottom:12px; }
    .schedule-date { font-weight:500; margin-bottom:4px; font-size:13px; }
    .schedule-event { display:flex; align-items:center; gap:4px; font-size:12px; margin:2px 0; }
    .schedule-event.past { color:#9aa0a6; }
    /* Modals */
    .modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,.5); z-index:1000; }
    .modal-content { background:white; margin:8% auto; padding:20px; border-radius:8px; width:90%; max-width:500px; position:relative; }
    .modal-close { position:absolute; top:10px; right:15px; font-size:22px; cursor:pointer; color:#5f6368; }
  </style>
</head>
<body>
  <header>
    <div class="nav-group">
      <button class="nav-btn" id="prevBtn">‹</button>
      <button class="nav-btn" id="todayBtn">Today</button>
      <button class="nav-btn" id="nextBtn">›</button>
    </div>
    <div class="month-label" id="viewLabel">Loading…</div>
    <div class="nav-group">
      <button class="view-btn" data-view="month">Month</button>
      <button class="view-btn" data-view="week">Week</button>
      <button class="view-btn" data-view="schedule">Schedule</button>
      <button id="pdfBtn">Download PDF</button>
    </div>
  </header>

  <div id="calendarContainer"></div>

  <div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:#d93025"></div> Events</div>
    <div class="legend-item"><div class="legend-dot" style="background:#f29900"></div> Non-Public</div>
    <div class="legend-item"><div class="legend-dot" style="background:#1a73e8"></div> TBD</div>
    <div class="legend-item"><div class="legend-dot" style="background:#5f6368"></div> Theater 1</div>
    <div class="legend-item"><div class="legend-dot" style="background:#188038"></div> Theater 2</div>
  </div>

  <!-- Modals -->
  <div id="eventModal" class="modal">
    <div class="modal-content">
      <span class="modal-close" id="eventClose">&times;</span>
      <div id="eventDetails"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>

// JS content omitted in this demo due to size...

    window.onload=load;
    window.addEventListener("keydown",e=>{
      if(e.key==="ArrowLeft"){if(currentView==="month"){currentDate.setMonth(currentDate.getMonth()-1);}else{currentDate.setDate(currentDate.getDate()-7);}load();}
      else if(e.key==="ArrowRight"){if(currentView==="month"){currentDate.setMonth(currentDate.getMonth()+1);}else{currentDate.setDate(currentDate.getDate()+7);}load();}
      else if(e.key.toLowerCase()==="t"){currentDate=new Date();load();}
    });
  </script>
</body>
</html>
